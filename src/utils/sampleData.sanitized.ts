import { Listing } from './parser';

// Deduplicated listings with sanitized phone numbers
export const sampleListings: Listing[] = [
  {
    "id": "1",
    "date": "2025-02-24T17:26:00.000Z",
    "sender": "PHONE_REDACTED_1",
    "text": "2-3 years\nGood condition\nR70\nPUDO or PAXI",
    "images": [
      "/images/listings/IMG-20250224-WA0019.jpg"
    ],
    "price": 70,
    "condition": "Good",
    "size": "2-3 years",
    "location": null,
    "category": "Clothing",
    "isISO": false
  },
  {
    "id": "2",
    "date": "2025-02-24T17:33:00.000Z",
    "sender": "PHONE_REDACTED_1",
    "text": "Plush teddy\nGood condition\nR40\nPUDO or PAXI",
    "images": [
      "/images/listings/IMG-20250224-WA0021.jpg"
    ],
    "price": 40,
    "condition": "Good",
    "size": null,
    "location": null,
    "category": "Toys",
    "isISO": false
  },
  {
    "id": "3",
    "date": "2025-02-24T17:36:00.000Z",
    "sender": "PHONE_REDACTED_1",
    "text": "Keedo jumpsuit\n18-24 months\nGood condition\nR50\nPUDO or PAXI",
    "images": [
      "/images/listings/IMG-20250224-WA0022.jpg"
    ],
    "price": 50,
    "condition": "Good",
    "size": "18-24 months",
    "location": null,
    "category": "Clothing",
    "isISO": false
  },
  {
    "id": "4",
    "date": "2025-02-24T19:19:00.000Z",
    "sender": "PHONE_REDACTED_2",
    "text": "Boys dungaree and top set. New and unworn.\nBrand: Pep\nSize: 18-24 months\nPrice: R100\nCollection: Constantia Village or Kirstenhof",
    "images": [
      "/images/listings/IMG-20250224-WA0025.jpg"
    ],
    "price": 100,
    "condition": "New",
    "size": "18-24 months",
    "location": "Constantia Village",
    "category": "Clothing",
    "isISO": false
  },
  {
    "id": "5",
    "date": "2025-02-24T21:33:00.000Z",
    "sender": "PHONE_REDACTED_3",
    "text": "Adidas kids UK8 and a half\n\nBrand new, bought in Australia\n\nR500\n\nCollection in Ottery",
    "images": [
      "/images/listings/IMG-20250224-WA0029.jpg"
    ],
    "price": 500,
    "condition": "New",
    "size": "UK8.5",
    "location": "Ottery",
    "category": "Footwear",
    "isISO": false
  },
  {
    "id": "6",
    "date": "2025-02-25T07:13:00.000Z",
    "sender": "PHONE_REDACTED_4",
    "text": "Winnie the pooh toddler bed 137x74cm. Include mattress. Good condition. R950. Collection Wynberg",
    "images": [
      "/images/listings/IMG-20250225-WA0002.jpg"
    ],
    "price": 950,
    "condition": "Good",
    "size": null,
    "location": "Wynberg",
    "category": "Furniture",
    "isISO": false
  },
  {
    "id": "7",
    "date": "2025-02-25T07:29:00.000Z",
    "sender": "PHONE_REDACTED_5",
    "text": "ISO of a campcot in reasonable condition üôèüèº",
    "images": [],
    "price": null,
    "condition": null,
    "size": null,
    "location": null,
    "category": "Furniture",
    "isISO": true
  },
  {
    "id": "8",
    "date": "2025-02-25T11:10:00.000Z",
    "sender": "PHONE_REDACTED_6",
    "text": "Infantino flip 4 in 1 convertible carrier\nR550\nNew (box is rather damaged but the carrier has never been used)\nMeet up Muizenberg\nX posted",
    "images": [
      "/images/listings/IMG-20250225-WA0020.jpg"
    ],
    "price": 550,
    "condition": "New",
    "size": null,
    "location": "Muizenberg",
    "category": "Gear",
    "isISO": false
  },
  {
    "id": "9",
    "date": "2025-02-25T11:31:00.000Z",
    "sender": "PHONE_REDACTED_7",
    "text": "18-24m bundle R440\nMix of Edgars, Ackermans and pnp clothing",
    "images": [
      "/images/listings/IMG-20250225-WA0023.jpg"
    ],
    "price": 440,
    "condition": "Good",
    "size": "18-24 months",
    "location": null,
    "category": "Clothing",
    "isISO": false
  },
  {
    "id": "10",
    "date": "2025-02-25T14:37:00.000Z",
    "sender": "PHONE_REDACTED_8",
    "text": "Toddler teepee floor bed with railing. Mattress included. R2000. Can be disassembled for transportation. Collect Kirstenhof",
    "images": [
      "/images/listings/IMG-20250225-WA0025.jpg"
    ],
    "price": 2000,
    "condition": "Good",
    "size": null,
    "location": "Kirstenhof",
    "category": "Furniture",
    "isISO": false
  },
  {
    "id": "11",
    "date": "2025-02-25T15:16:00.000Z",
    "sender": "PHONE_REDACTED_9",
    "text": "LilleBaby 6-in-1 carrier from Newborn to Toddler.\nGreat condition.\nNot available in SA\nSelling for R1000\nCollection in Claremont",
    "images": [
      "/images/listings/IMG-20250225-WA0027.jpg"
    ],
    "price": 1000,
    "condition": "Good",
    "size": null,
    "location": "Claremont",
    "category": "Gear",
    "isISO": false
  },
  {
    "id": "12",
    "date": "2025-02-25T18:06:00.000Z",
    "sender": "PHONE_REDACTED_10",
    "text": "Naartjie 18 to 24 months cotton track shorts. Good condition R110 for both. Collect Kenilworth",
    "images": [
      "/images/listings/IMG-20250225-WA0030.jpg"
    ],
    "price": 110,
    "condition": "Good",
    "size": "18-24 months",
    "location": "Kenilworth",
    "category": "Clothing",
    "isISO": false
  },
  {
    "id": "13",
    "date": "2025-02-25T18:06:00.000Z",
    "sender": "PHONE_REDACTED_10",
    "text": "Age 1.5 to 2 Woolies body warmer. Thin sherpa fleece lined with diamond stitching on outside. Super retro cute! Good to fair condition due to how sherpa fleece \"wears\" and small section of diamond stitching on back has come out. Not noticeable - but happy to send a pic. R100 Collect Kenilworth",
    "images": [
      "/images/listings/IMG-20250225-WA0031.jpg"
    ],
    "price": 100,
    "condition": "Fair",
    "size": "1.5-2 years",
    "location": "Kenilworth",
    "category": "Clothing",
    "isISO": false
  },
  {
    "id": "14",
    "date": "2025-02-25T18:06:00.000Z",
    "sender": "PHONE_REDACTED_10",
    "text": "Age 3 Naartjie super cool hoodie, 100% cotton. Very good condition R120. Collect Kenilworth",
    "images": [
      "/images/listings/IMG-20250225-WA0032.jpg"
    ],
    "price": 120,
    "condition": "Excellent",
    "size": "3 years",
    "location": "Kenilworth",
    "category": "Clothing",
    "isISO": false
  },
  {
    "id": "15",
    "date": "2025-02-25T18:07:00.000Z",
    "sender": "PHONE_REDACTED_10",
    "text": "Size 4 woolies canvas shoes. Never worn. R80 Collect Kenilworth",
    "images": [
      "/images/listings/IMG-20250225-WA0033.jpg"
    ],
    "price": 80,
    "condition": "New",
    "size": "Size 4",
    "location": "Kenilworth",
    "category": "Footwear",
    "isISO": false
  },
  {
    "id": "16",
    "date": "2025-02-25T18:07:00.000Z",
    "sender": "PHONE_REDACTED_10",
    "text": "Size 4 Woolies velcro sandals. Good condition R80. Collect Kenilworth",
    "images": [
      "/images/listings/IMG-20250225-WA0034.jpg"
    ],
    "price": 80,
    "condition": "Good",
    "size": "Size 4",
    "location": "Kenilworth",
    "category": "Footwear",
    "isISO": false
  },
  {
    "id": "17",
    "date": "2025-02-25T18:07:00.000Z",
    "sender": "PHONE_REDACTED_10",
    "text": "Size 4 Woolies stokies. Good condition R40. Collect Kenilworth",
    "images": [
      "/images/listings/IMG-20250225-WA0035.jpg"
    ],
    "price": 40,
    "condition": "Good",
    "size": "Size 4",
    "location": "Kenilworth",
    "category": "Footwear",
    "isISO": false
  }
];

// Helper functions
export const countBy = <T>(array: T[], key: keyof T): Record<string, number> => {
  return array.reduce((acc, item) => {
    const value = String(item[key] || 'Unknown');
    acc[value] = (acc[value] || 0) + 1;
    return acc;
  }, {} as Record<string, number>);
};

export const getUniqueValues = <T>(array: T[], key: keyof T): string[] => {
  const values = array.map(item => String(item[key] || '')).filter(Boolean);
  return Array.from(new Set(values)).sort();
};

export const getISOPosts = (): Listing[] => {
  return sampleListings.filter(listing => listing.isISO);
};

export const getListings = (): Listing[] => {
  return sampleListings.filter(listing => !listing.isISO);
}; 